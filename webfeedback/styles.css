/**
 * WebFeedback Widget - Scoped CSS Variables
 * 
 * These CSS variables are scoped to [data-webfeedback] to prevent
 * conflicts with the host project's styles.
 * 
 * Import this file in your root layout or global CSS.
 * The widget will automatically apply these scoped styles.
 */

/* Scoped to widget container to avoid style conflicts */
[data-webfeedback] {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
}

/* Dark mode support - scoped to widget */
[data-webfeedback].dark,
[data-webfeedback] .dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
}

/* Widget container isolation - ensure proper positioning and display */
[data-webfeedback="root"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  font-size: 14px;
  line-height: 1.5;
  color: var(--foreground);
  box-sizing: border-box;
  /* Prevent inheritance of problematic styles */
  direction: ltr;
  text-align: left;
}

[data-webfeedback="root"] *,
[data-webfeedback="root"] *::before,
[data-webfeedback="root"] *::after {
  box-sizing: border-box;
}

/* Ensure widget is positioned correctly - override any host site styles */
[data-webfeedback="widget"] {
  position: fixed !important;
  bottom: 24px !important;
  right: 24px !important;
  left: auto !important;
  top: auto !important;
  z-index: 9999 !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 12px !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Ensure actions container displays correctly */
[data-webfeedback="widget"] > div:first-child {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
  gap: 8px !important;
  padding: 6px !important;
  border-radius: 8px !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
  border: 1px solid var(--border, #e5e7eb) !important;
  background-color: var(--background, #ffffff) !important;
  margin: 0 !important;
}

/* Ensure icons render correctly */
[data-webfeedback="widget"] svg {
  display: block !important;
  flex-shrink: 0 !important;
}

/* Ensure buttons render correctly */
[data-webfeedback="widget"] button {
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: relative !important;
}

/* Ensure toggle switch renders correctly */
[data-webfeedback="widget"] [role="switch"],
[data-webfeedback="widget"] [data-state] {
  display: inline-flex !important;
  align-items: center !important;
}

/* Dialog overlay - ensure proper background and z-index */
[data-webfeedback="overlay"] {
  background-color: rgba(0, 0, 0, 0.5) !important;
  position: fixed !important;
  inset: 0 !important;
  z-index: 50 !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* Dialog content - ensure proper background, positioning, and styling */
[data-webfeedback="dialog"] {
  background-color: var(--background, #ffffff) !important;
  color: var(--foreground, #000000) !important;
  position: fixed !important;
  z-index: 50 !important;
  border: 1px solid var(--border, #e5e7eb) !important;
  border-radius: 0.5rem !important;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05) !important;
  padding: 1.5rem !important;
  margin: 0 !important;
  /* Prevent inheritance of problematic styles */
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  font-size: 14px !important;
  line-height: 1.5 !important;
  box-sizing: border-box !important;
}

/* Ensure dialog content and children use proper box-sizing */
[data-webfeedback="dialog"] *,
[data-webfeedback="dialog"] *::before,
[data-webfeedback="dialog"] *::after {
  box-sizing: border-box !important;
}

/* Dark mode support for dialog */
[data-webfeedback].dark [data-webfeedback="dialog"],
[data-webfeedback] .dark [data-webfeedback="dialog"] {
  background-color: var(--background, #1a1a1a) !important;
  color: var(--foreground, #ffffff) !important;
  border-color: var(--border, rgba(255, 255, 255, 0.1)) !important;
}

/* Button styles - ensure buttons within widget and dialog display correctly */
[data-webfeedback] button,
[data-webfeedback="dialog"] button,
[data-webfeedback="widget"] button,
[data-webfeedback] [data-slot="button"],
[data-webfeedback="dialog"] [data-slot="button"],
[data-webfeedback="widget"] [data-slot="button"] {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
  font-size: 14px !important;
  font-weight: 500 !important;
  line-height: 1.5 !important;
  box-sizing: border-box !important;
  cursor: pointer !important;
  transition: all 0.2s !important;
}

/* Primary button (default variant) - black background with white text */
/* Target buttons with bg-primary class explicitly */
[data-webfeedback] button.bg-primary,
[data-webfeedback="dialog"] button.bg-primary,
[data-webfeedback="widget"] button.bg-primary,
[data-webfeedback] [data-slot="button"].bg-primary,
[data-webfeedback="dialog"] [data-slot="button"].bg-primary {
  background-color: var(--primary, #000000) !important;
  color: var(--primary-foreground, #ffffff) !important;
}

[data-webfeedback] button.bg-primary:hover,
[data-webfeedback="dialog"] button.bg-primary:hover,
[data-webfeedback="widget"] button.bg-primary:hover,
[data-webfeedback] [data-slot="button"].bg-primary:hover,
[data-webfeedback="dialog"] [data-slot="button"].bg-primary:hover {
  background-color: var(--primary, #000000) !important;
  opacity: 0.9 !important;
}

/* Also target buttons that use text-primary-foreground (indicating primary variant) */
[data-webfeedback] [data-slot="button"].text-primary-foreground,
[data-webfeedback="dialog"] [data-slot="button"].text-primary-foreground {
  background-color: var(--primary, #000000) !important;
  color: var(--primary-foreground, #ffffff) !important;
}

/* Target submit buttons in forms within dialog (likely primary actions) */
[data-webfeedback="dialog"] form button[type="submit"]:not(.bg-background):not(.bg-secondary):not(.bg-destructive),
[data-webfeedback="dialog"] form [data-slot="button"][type="submit"]:not(.bg-background):not(.bg-secondary):not(.bg-destructive) {
  background-color: var(--primary, #000000) !important;
  color: var(--primary-foreground, #ffffff) !important;
}

/* Outline button variant */
[data-webfeedback] button.bg-background,
[data-webfeedback="dialog"] button.bg-background,
[data-webfeedback="widget"] button.bg-background,
[data-webfeedback] [data-slot="button"].bg-background,
[data-webfeedback="dialog"] [data-slot="button"].bg-background {
  background-color: var(--background, #ffffff) !important;
  color: var(--foreground, #000000) !important;
  border: 1px solid var(--border, #e5e7eb) !important;
}

/* Secondary button variant */
[data-webfeedback] button.bg-secondary,
[data-webfeedback="dialog"] button.bg-secondary,
[data-webfeedback="widget"] button.bg-secondary {
  background-color: var(--secondary, #f5f5f5) !important;
  color: var(--secondary-foreground, #000000) !important;
}

/* Ghost button variant */
[data-webfeedback] button:has(.hover\:bg-accent),
[data-webfeedback="dialog"] button:has(.hover\:bg-accent) {
  background-color: transparent !important;
}

/* Ensure text colors are applied correctly */
[data-webfeedback] button.text-primary-foreground,
[data-webfeedback="dialog"] button.text-primary-foreground,
[data-webfeedback="widget"] button.text-primary-foreground {
  color: var(--primary-foreground, #ffffff) !important;
}

[data-webfeedback] button.text-foreground,
[data-webfeedback="dialog"] button.text-foreground {
  color: var(--foreground, #000000) !important;
}

/* Dark mode button support */
[data-webfeedback].dark button.bg-primary,
[data-webfeedback] .dark button.bg-primary,
[data-webfeedback].dark [data-webfeedback="dialog"] button.bg-primary,
[data-webfeedback] .dark [data-webfeedback="dialog"] button.bg-primary {
  background-color: var(--primary, #ebebeb) !important;
  color: var(--primary-foreground, #000000) !important;
}

